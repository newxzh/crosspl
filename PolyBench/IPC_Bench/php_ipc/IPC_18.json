{
  "Task_id": 18,
  "Github_ID": "134953788",
  "Github_Project_Name": "sakura",
  "Programming_Language": "PHP",
  "suffix": ".php",
  "Interface_class": "IPC",
  "Interface_name": "HTTP client using cURL in PHP",
  "Instruction": "Task Description: Create a PHP class that handles HTTP requests using cURL with support for custom headers, payloads, and proxy configuration.\n\nClass Description: The Meting class provides functionality to make HTTP requests using PHP's cURL library. It supports GET/POST requests, custom headers, timeout settings, retry mechanism, and proxy configuration.\n\nAttributes:\n- header: array - Stores HTTP headers to be sent with the request\n- proxy: string - Stores proxy server address if configured\n- raw: mixed - Stores the raw response from the cURL request\n- info: array - Stores cURL request information\n- error: int - Stores cURL error code if any\n- status: string - Stores cURL error message if any\n\nMethods:\n- curl(string $url, mixed $payload = null, int $headerOnly = 0) -> self - Makes an HTTP request to the specified URL with optional payload and header-only response flag. Returns the class instance for method chaining.\n  Parameters:\n    - $url: string - The target URL for the request\n    - $payload: mixed - Optional request payload (array or string)\n    - $headerOnly: int - Flag to return only headers (1) or full response (0)",
  "Canonical_solution": "namespace Sakura\\API;\n\nclass Meting\n{\n    private function curl($url, $payload = null, $headerOnly = 0)\n    {\n        $header = array_map(function ($k, $v) {\n            return $k.': '.$v;\n        }, array_keys($this->header), $this->header);\n        $curl = curl_init();\n        if (!is_null($payload)) {\n            curl_setopt($curl, CURLOPT_POST, 1);\n            curl_setopt($curl, CURLOPT_POSTFIELDS, is_array($payload) ? http_build_query($payload) : $payload);\n        }\n        curl_setopt($curl, CURLOPT_HEADER, $headerOnly);\n        curl_setopt($curl, CURLOPT_TIMEOUT, 20);\n        curl_setopt($curl, CURLOPT_ENCODING, 'gzip');\n        curl_setopt($curl, CURLOPT_IPRESOLVE, 1);\n        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\n        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);\n        curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 10);\n        curl_setopt($curl, CURLOPT_URL, $url);\n        curl_setopt($curl, CURLOPT_HTTPHEADER, $header);\n        if ($this->proxy) {\n            curl_setopt($curl, CURLOPT_PROXY, $this->proxy);\n        }\n        for ($i = 0; $i < 3; $i++) {\n            $this->raw = curl_exec($curl);\n            $this->info = curl_getinfo($curl);\n            $this->error = curl_errno($curl);\n            $this->status = $this->error ? curl_error($curl) : '';\n            if (!$this->error) {\n                break;\n            }\n        }\n        curl_close($curl);\n\n        return $this;\n    }\n}",
  "FSMID_for_test": 132,
  "Code_level": "Class-level"
}